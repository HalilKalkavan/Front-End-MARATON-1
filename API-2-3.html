<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <title>Document</title>
</head>
<body style="margin-left: 20px">
    <div class="container"></div>
    <h3>API sorulari 2-3</h3>
    <p>Yarıştaki ortalama hızı en yüksek olan pilot hangisi? Pilot adını ve hızını ekrana yazdır
    </p>
        <table>
            <thead>
                <tr>
                    <th>Pilot adi</th>
                    <th>Soyadi</th>
                    <th>Ulke</th>
                    <th>Ortalama hiz</th>
                </tr>
            </thead>
            <tbody>
                
            </tbody>
        </table>
    </div>
    </body>
</html>

<Script>
    var url = "https://ergast.com/api/f1/2004/1/results.json";

    $.getJSON(url, function (veri) {
        //remove older list from document
        $("ul li").remove();
        
        // console.log(veri.MRData.RaceTable.Races[0].Results[0]);
        // console.log(veri.MRData.RaceTable.Races[0].Results[0].Driver);
        // console.log(veri.MRData.RaceTable.Races[0].Results[0].Driver.givenName);
        // console.log(veri.MRData.RaceTable.Races[0].Results.length); //length of array
        // console.log(veri);
        var lengthOfObject = veri.MRData.RaceTable.Races[0].Results.length;
        var avrSpdArry = [];
        for(var i = 0; i < lengthOfObject; i++) {
        // var givenName = veri.MRData.RaceTable.Races[0].Results[i].Driver.givenName;
        // var familyName = veri.MRData.RaceTable.Races[0].Results[i].Driver.familyName;
        // var country = veri.MRData.RaceTable.Races[0].Results[i].Driver.nationality;
        // var averageSpeed = veri.MRData.RaceTable.Races[0].Results[i].FastestLap.AverageSpeed.speed;
        avrSpdArry.push(veri.MRData.RaceTable.Races[0].Results[i].FastestLap.AverageSpeed.speed);
        
        // let obj = { 'a': 4, 'b': 0.5, 'c': 0.35, 'd': 5 }
        // let min = Object.values(obj).sort((prev, next) => prev - next)[0] // 0.35
        // let max = Object.values(obj).sort((prev, next) => next - prev)[0] // 5

            // $("tbody").append(`
            //  <tr>
            //     <td>`+ givenName + `</td>
            //     <td>`+ familyName + `</td>
            //     <td>`+ country + `</td>
            //     <td>`+ averageSpeed + `</td>
            //  </tr>`)
        }

        console.log(avrSpdArry);
        console.log(Math.max(...avrSpdArry));
        var maxSpeed = Math.max(...avrSpdArry);
        var indOfary = avrSpdArry.indexOf(maxSpeed);
        console.log(avrSpdArry.findIndex(maxSpeed));
    })
</Script>